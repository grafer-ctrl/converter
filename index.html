<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Modern PWA Converter</title>
    <meta name="description" content="Modern Unit Converter App with Neo-Glassmorphism design">
    <meta name="theme-color" content="#0f172a">
    
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* Midnight & Neon Orange Palette */
            --bg-dark: #0f172a;
            --bg-panel: rgba(30, 41, 59, 0.75);
            --glass-border: rgba(255, 255, 255, 0.1);
            --primary: #f97316; /* Neon Orange */
            --primary-glow: rgba(249, 115, 22, 0.4);
            --secondary: #ec4899;
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
            --radius-lg: 24px;
            --radius-md: 16px;
            --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
            --sidebar-width: 280px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 100px;
        }

        /* Ambient Background Orbs */
        .orb { position: fixed; border-radius: 50%; filter: blur(90px); z-index: -1; opacity: 0.5; }
        .orb-1 { top: -60px; left: -60px; width: 300px; height: 300px; background: var(--primary); }
        .orb-2 { bottom: 100px; right: -60px; width: 250px; height: 250px; background: var(--secondary); }

        .app-container { max-width: 600px; margin: 0 auto; padding: 20px; transition: 0.3s; }

        /* HEADER & HAMBURGER */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 10px 5px;
        }

        .header-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(to right, #fff, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .btn-menu {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--glass-border);
            width: 44px;
            height: 44px;
            border-radius: 12px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            backdrop-filter: blur(5px);
            z-index: 1100;
            transition: 0.3s;
        }
        
        .btn-menu:hover { background: var(--primary); border-color: var(--primary); }

        /* SIDEBAR MENU */
        .menu-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 1050;
            opacity: 0; pointer-events: none;
            transition: 0.3s;
        }
        .menu-overlay.active { opacity: 1; pointer-events: auto; }

        .side-menu {
            position: fixed; top: 0; right: -100%;
            width: var(--sidebar-width); height: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-left: 1px solid var(--glass-border);
            z-index: 1100;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            padding: 80px 25px 25px 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            box-shadow: -10px 0 30px rgba(0,0,0,0.5);
        }
        .side-menu.active { right: 0; }

        .menu-section-title {
            color: var(--text-muted);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 5px;
        }

        .lang-btn-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .lang-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            color: var(--text-muted);
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: 0.3s;
        }

        .lang-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 15px var(--primary-glow);
        }

        .pwa-install-full {
            width: 100%;
            padding: 15px;
            background: linear-gradient(to right, #3b82f6, #2563eb);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            margin-top: auto;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* GLASS CARD & INPUTS */
        .glass-card {
            background: var(--bg-panel);
            backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .section-label {
            display: block; color: var(--text-muted); font-size: 0.85rem;
            margin-bottom: 10px; font-weight: 600; letter-spacing: 0.5px;
        }

        .custom-select-wrapper { position: relative; margin-bottom: 15px; }
        .custom-select-wrapper i {
            position: absolute; left: 16px; top: 50%;
            transform: translateY(-50%); color: var(--primary); z-index: 1;
        }

        select, input {
            width: 100%; background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border); color: white;
            padding: 16px 16px 16px 45px; border-radius: var(--radius-md);
            font-size: 1rem; font-family: inherit; appearance: none; outline: none;
            transition: 0.3s;
        }
        select:focus, input:focus { border-color: var(--primary); background: rgba(0,0,0,0.5); }

        .input-container-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

        .btn-convert {
            width: 100%; background: linear-gradient(135deg, var(--primary), #f59e0b);
            color: white; border: none; padding: 16px; border-radius: var(--radius-md);
            font-size: 1.1rem; font-weight: 700; cursor: pointer;
            box-shadow: 0 4px 20px rgba(249, 115, 22, 0.4); margin-top: 15px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-convert:active { transform: scale(0.98); }

        .result-card {
            margin-top: 20px; padding: 20px;
            background: rgba(249, 115, 22, 0.1);
            border: 1px solid rgba(249, 115, 22, 0.3);
            border-radius: var(--radius-md);
            text-align: center; display: none;
            animation: slideUp 0.4s ease forwards;
        }
        .result-card.show { display: block; }
        .result-value { font-size: 1.4rem; font-weight: 700; color: var(--primary); margin-top: 5px; word-break: break-word;}

        /* BOTTOM NAV */
        .bottom-nav {
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%); width: 90%; max-width: 500px;
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: 30px;
            display: flex; justify-content: space-around; padding: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6); z-index: 1000;
        }
        .nav-item {
            color: var(--text-muted); background: none; border: none;
            display: flex; flex-direction: column; align-items: center;
            font-size: 0.75rem; gap: 4px; cursor: pointer;
        }
        .nav-item.active { color: var(--primary); }

        /* ANIMATIONS & UTILS */
        .converter-group { display: none; }
        .converter-group.active { display: block; animation: fadeIn 0.5s ease; }
        .ad-container { margin-top: 30px; margin-bottom: 80px; text-align: center; border-radius: var(--radius-md); overflow: hidden; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <!-- Sidebar Menu Overlay -->
    <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>

    <!-- Sidebar Menu -->
    <aside class="side-menu" id="sideMenu">
        <div>
            <div class="menu-section-title" data-i18n="menu_lang">LANGUAGE / BAHASA</div>
            <div class="lang-btn-group">
                <!-- English is Active by Default in UI structure -->
                <button class="lang-btn active" id="btn-en" onclick="setLanguage('en')">
                    <img src="https://flagcdn.com/w20/us.png" alt="EN"> Eng
                </button>
                <button class="lang-btn" id="btn-id" onclick="setLanguage('id')">
                    <img src="https://flagcdn.com/w20/id.png" alt="ID"> Indo
                </button>
            </div>
        </div>

        <div>
            <div class="menu-section-title" data-i18n="menu_about">ABOUT APP</div>
            <p style="font-size: 0.9rem; color: var(--text-muted); line-height: 1.5;">
                <span data-i18n="about_desc">Unit Converter App with modern design. Fast, lightweight, and works offline.</span>
            </p>
        </div>

        <button class="pwa-install-full" id="installButton">
            <i class="fas fa-download"></i> <span data-i18n="btn_install">Install App</span>
        </button>
    </aside>

    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="header-text">
                <h1 data-i18n="app_title">Converter</h1>
                <p style="color: var(--text-muted); font-size: 0.9rem;" data-i18n="app_subtitle">Fast & Modern</p>
            </div>
            <!-- Hamburger Button -->
            <button class="btn-menu" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <!-- Main Interface -->
        <div class="glass-card">
            <label class="section-label"><i class="fas fa-layer-group"></i> <span data-i18n="lbl_category">CATEGORY</span></label>
            <div class="custom-select-wrapper">
                <i class="fas fa-shapes"></i>
                <select id="category" onchange="showConverter()">
                    <!-- Options default English -->
                    <option value="length" data-i18n="cat_length">Length</option>
                    <option value="weight" data-i18n="cat_weight">Weight</option>
                    <option value="temperature" data-i18n="cat_temp">Temperature</option>
                    <option value="data" data-i18n="cat_data">Data Storage</option>
                    <option value="currency" data-i18n="cat_currency">Currency</option>
                    <option value="area">Area</option>
                    <option value="volume">Volume</option>
                    <option value="speed">Speed</option>
                </select>
            </div>

            <!-- Input Zone -->
            <!-- Length -->
            <div id="length-converter" class="converter-group active">
                <div class="input-group">
                    <label class="section-label"><span data-i18n="lbl_val_unit">VALUE & UNIT</span></label>
                    <div class="custom-select-wrapper">
                        <i class="fas fa-pen"></i>
                        <input type="number" id="length-input" placeholder="0" style="font-size: 1.5rem; font-weight: bold;">
                    </div>
                    <div class="input-container-row">
                        <div class="custom-select-wrapper">
                            <i class="fas fa-arrow-down"></i>
                            <select id="from-length-unit">
                                <option value="meter">Meter (m)</option>
                                <option value="kilometer">Kilometer (km)</option>
                                <option value="centimeter">Centimeter (cm)</option>
                                <option value="millimeter">Millimeter (mm)</option>
                                <option value="mile">Mile (mi)</option>
                                <option value="foot">Foot (ft)</option>
                                <option value="inch">Inch (in)</option>
                            </select>
                        </div>
                        <div class="custom-select-wrapper">
                            <i class="fas fa-arrow-up"></i>
                            <select id="to-length-unit">
                                <option value="meter">Meter (m)</option>
                                <option value="kilometer">Kilometer (km)</option>
                                <option value="centimeter">Centimeter (cm)</option>
                                <option value="millimeter">Millimeter (mm)</option>
                                <option value="mile">Mile (mi)</option>
                                <option value="foot">Foot (ft)</option>
                                <option value="inch">Inch (in)</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn-convert" onclick="convertLength()">
                        <span data-i18n="btn_calc">CALCULATE</span> <i class="fas fa-bolt"></i>
                    </button>
                    <div id="length-result" class="result-card"></div>
                </div>
            </div>

            <!-- Weight -->
            <div id="weight-converter" class="converter-group">
                <div class="input-group">
                    <div class="custom-select-wrapper"><i class="fas fa-weight-hanging"></i><input type="number" id="weight-input" placeholder="0"></div>
                    <div class="input-container-row">
                        <select id="from-weight-unit"><option value="kilogram">Kilogram (kg)</option><option value="gram">Gram (g)</option><option value="pound">Pound (lb)</option><option value="ounce">Ounce (oz)</option></select>
                        <select id="to-weight-unit"><option value="kilogram">Kilogram (kg)</option><option value="gram">Gram (g)</option><option value="pound">Pound (lb)</option><option value="ounce">Ounce (oz)</option></select>
                    </div>
                    <button class="btn-convert" onclick="convertWeight()"><span data-i18n="btn_calc">CALCULATE</span></button>
                    <div id="weight-result" class="result-card"></div>
                </div>
            </div>

            <!-- Temperature -->
            <div id="temperature-converter" class="converter-group">
                <div class="input-group">
                    <div class="custom-select-wrapper"><i class="fas fa-thermometer-half"></i><input type="number" id="temperature-input" placeholder="0"></div>
                    <div class="input-container-row">
                        <select id="from-temperature-unit"><option value="celsius">Celsius (째C)</option><option value="fahrenheit">Fahrenheit (째F)</option><option value="kelvin">Kelvin (K)</option></select>
                        <select id="to-temperature-unit"><option value="celsius">Celsius (째C)</option><option value="fahrenheit">Fahrenheit (째F)</option><option value="kelvin">Kelvin (K)</option></select>
                    </div>
                    <button class="btn-convert" onclick="convertTemperature()"><span data-i18n="btn_calc">CALCULATE</span></button>
                    <div id="temperature-result" class="result-card"></div>
                </div>
            </div>

            <!-- Data -->
            <div id="data-converter" class="converter-group">
                <div class="input-group">
                    <div class="custom-select-wrapper"><i class="fas fa-database"></i><input type="number" id="data-input" placeholder="0"></div>
                    <div class="input-container-row">
                        <select id="from-data-unit"><option value="megabyte">Megabyte (MB)</option><option value="gigabyte">Gigabyte (GB)</option><option value="terabyte">Terabyte (TB)</option><option value="kilobyte">Kilobyte (KB)</option></select>
                        <select id="to-data-unit"><option value="megabyte">Megabyte (MB)</option><option value="gigabyte">Gigabyte (GB)</option><option value="terabyte">Terabyte (TB)</option><option value="kilobyte">Kilobyte (KB)</option></select>
                    </div>
                    <button class="btn-convert" onclick="convertData()"><span data-i18n="btn_calc">CALCULATE</span></button>
                    <div id="data-result" class="result-card"></div>
                </div>
            </div>

            <!-- Currency -->
            <div id="currency-converter" class="converter-group">
                <div class="input-group">
                    <div class="custom-select-wrapper"><i class="fas fa-money-bill"></i><input type="number" id="currency-input" placeholder="0"></div>
                    <div class="input-container-row">
                        <select id="from-currency-unit"><option value="IDR">IDR (Indonesia)</option><option value="USD">USD (USA)</option><option value="EUR">EUR (Europe)</option><option value="JPY">JPY (Japan)</option></select>
                        <select id="to-currency-unit"><option value="USD">USD (USA)</option><option value="IDR">IDR (Indonesia)</option><option value="EUR">EUR (Europe)</option><option value="JPY">JPY (Japan)</option></select>
                    </div>
                    <button class="btn-convert" onclick="convertCurrency()"><span data-i18n="btn_calc">CALCULATE</span></button>
                    <div id="currency-result" class="result-card"></div>
                </div>
            </div>

            <!-- Placeholder for others -->
            <div id="area-converter" class="converter-group"><div class="input-group"><input id="area-input"><select id="from-area-unit"></select><select id="to-area-unit"></select><button onclick="convertArea()">Calc</button><div id="area-result" class="result-card"></div></div></div>
            <div id="volume-converter" class="converter-group"><div class="input-group"><input id="volume-input"><select id="from-volume-unit"></select><select id="to-volume-unit"></select><button onclick="convertVolume()">Calc</button><div id="volume-result" class="result-card"></div></div></div>
            <div id="speed-converter" class="converter-group"><div class="input-group"><input id="speed-input"><select id="from-speed-unit"></select><select id="to-speed-unit"></select><button onclick="convertSpeed()">Calc</button><div id="speed-result" class="result-card"></div></div></div>

        </div>

        <!-- Adsterra Ads -->
        <div class="ad-container">
            <script type="text/javascript">
                atOptions = {
                    'key' : 'ebfdab5e67bf88fdbf6b899b5deca8bd',
                    'format' : 'iframe',
                    'height' : 60,
                    'width' : 468,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/ebfdab5e67bf88fdbf6b899b5deca8bd/invoke.js"></script>
        </div>

    </div>

    <!-- Bottom Nav -->
    <nav class="bottom-nav">
        <button class="nav-item active" onclick="window.scrollTo(0,0)">
            <i class="fas fa-calculator"></i>
            <span data-i18n="nav_calc">Calc</span>
        </button>
        <button class="nav-item" onclick="alert('Coming soon!')">
            <i class="fas fa-history"></i>
            <span data-i18n="nav_history">History</span>
        </button>
        <button class="nav-item" onclick="location.reload()">
            <i class="fas fa-sync-alt"></i>
            <span data-i18n="nav_reset">Reset</span>
        </button>
    </nav>

    <!-- LOGIC & TRANSLATION -->
    <script>
        // --- TRANSLATION DATA ---
        const translations = {
            id: {
                app_title: "Konverter",
                app_subtitle: "Cepat & Modern",
                lbl_category: "KATEGORI",
                lbl_val_unit: "NILAI & SATUAN",
                cat_length: "Panjang",
                cat_weight: "Berat",
                cat_temp: "Suhu",
                cat_data: "Penyimpanan Data",
                cat_currency: "Mata Uang",
                btn_calc: "HITUNG",
                btn_install: "Install Aplikasi",
                menu_lang: "BAHASA / LANGUAGE",
                menu_about: "TENTANG APLIKASI",
                about_desc: "Aplikasi Konverter Satuan dengan desain modern. Cepat, ringan, dan dapat digunakan secara offline.",
                nav_calc: "Hitung",
                nav_history: "Riwayat",
                nav_reset: "Reset",
                res_invalid: "Masukkan angka valid"
            },
            en: {
                app_title: "Converter",
                app_subtitle: "Fast & Modern",
                lbl_category: "CATEGORY",
                lbl_val_unit: "VALUE & UNIT",
                cat_length: "Length",
                cat_weight: "Weight",
                cat_temp: "Temperature",
                cat_data: "Data Storage",
                cat_currency: "Currency",
                btn_calc: "CALCULATE",
                btn_install: "Install App",
                menu_lang: "LANGUAGE / BAHASA",
                menu_about: "ABOUT APP",
                about_desc: "Unit Converter App with modern design. Fast, lightweight, and works offline.",
                nav_calc: "Calc",
                nav_history: "History",
                nav_reset: "Reset",
                res_invalid: "Enter valid number"
            }
        };

        // DEFAULT LANGUAGE SET TO 'en' (English)
        let currentLang = localStorage.getItem('appLang') || 'en';

        // --- UI FUNCTIONS ---
        function toggleMenu() {
            document.getElementById('sideMenu').classList.toggle('active');
            document.getElementById('menuOverlay').classList.toggle('active');
        }

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('appLang', lang);
            
            // Update Buttons UI
            document.getElementById('btn-id').classList.toggle('active', lang === 'id');
            document.getElementById('btn-en').classList.toggle('active', lang === 'en');

            // Replace Text Content
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.innerText = translations[lang][key];
                }
            });

            // Close menu after slight delay (only if menu is open)
            const menu = document.getElementById('sideMenu');
            if(menu.classList.contains('active')) {
                setTimeout(toggleMenu, 200);
            }
        }

        // Init Language on Load
        setLanguage(currentLang);

        // --- LOGIC CONVERTER ---
        function showConverter() {
            const category = document.getElementById('category').value;
            document.querySelectorAll('.converter-group').forEach(c => {
                c.classList.remove('active');
                if(c.id === `${category}-converter`) c.classList.add('active');
            });
            document.querySelectorAll('.result-card').forEach(r => r.classList.remove('show'));
        }

        function displayResult(elId, text) {
            const el = document.getElementById(elId);
            el.innerHTML = `<div class="result-value">${text}</div>`;
            el.classList.add('show');
        }

        function getInvalidMsg() {
            return translations[currentLang].res_invalid;
        }

        // 1. Length
        function convertLength() {
            const val = parseFloat(document.getElementById('length-input').value);
            const from = document.getElementById('from-length-unit').value;
            const to = document.getElementById('to-length-unit').value;
            if (isNaN(val)) return displayResult('length-result', getInvalidMsg());
            const toMeters = { meter: 1, kilometer: 1000, centimeter: 0.01, millimeter: 0.001, mile: 1609.34, foot: 0.3048, inch: 0.0254 };
            const res = (val * toMeters[from]) / toMeters[to];
            displayResult('length-result', `${res.toFixed(5)} ${to}`);
        }

        // 2. Weight
        function convertWeight() {
            const val = parseFloat(document.getElementById('weight-input').value);
            const from = document.getElementById('from-weight-unit').value;
            const to = document.getElementById('to-weight-unit').value;
            if (isNaN(val)) return displayResult('weight-result', getInvalidMsg());
            const toKg = { kilogram: 1, gram: 0.001, pound: 0.453592, ounce: 0.0283495 };
            const res = (val * toKg[from]) / toKg[to];
            displayResult('weight-result', `${res.toFixed(5)} ${to}`);
        }

        // 3. Temperature
        function convertTemperature() {
            const val = parseFloat(document.getElementById('temperature-input').value);
            const from = document.getElementById('from-temperature-unit').value;
            const to = document.getElementById('to-temperature-unit').value;
            if (isNaN(val)) return displayResult('temperature-result', getInvalidMsg());
            let res;
            if (from === to) res = val;
            else if (from === 'celsius') res = (to === 'fahrenheit') ? (val * 9/5) + 32 : val + 273.15;
            else if (from === 'fahrenheit') res = (to === 'celsius') ? (val - 32) * 5/9 : (val - 32) * 5/9 + 273.15;
            else if (from === 'kelvin') res = (to === 'celsius') ? val - 273.15 : (val - 273.15) * 9/5 + 32;
            displayResult('temperature-result', `${res.toFixed(2)} ${to}`);
        }

        // 4. Data
        function convertData() {
            const val = parseFloat(document.getElementById('data-input').value);
            const from = document.getElementById('from-data-unit').value;
            const to = document.getElementById('to-data-unit').value;
            if (isNaN(val)) return displayResult('data-result', getInvalidMsg());
            const toBytes = { kilobyte: 1024, megabyte: 1048576, gigabyte: 1073741824, terabyte: 1099511627776 };
            const res = (val * toBytes[from]) / toBytes[to];
            displayResult('data-result', `${res.toFixed(6)} ${to}`);
        }

        // 5. Currency
        function convertCurrency() {
            const val = parseFloat(document.getElementById('currency-input').value);
            const from = document.getElementById('from-currency-unit').value;
            const to = document.getElementById('to-currency-unit').value;
            if (isNaN(val)) return displayResult('currency-result', getInvalidMsg());
            const ratesToIDR = { IDR: 1, USD: 15500, EUR: 16800, JPY: 105 };
            const valInIDR = val * ratesToIDR[from];
            const res = valInIDR / ratesToIDR[to];
            displayResult('currency-result', `${res.toLocaleString('id-ID')} ${to}`);
        }

        function convertArea() {} function convertVolume() {} function convertSpeed() {}

        // --- PWA INSTALL LOGIC ---
        let deferredPrompt;
        const installBtn = document.getElementById('installButton');

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                const CACHE_NAME = 'unit-converter-en-v1';
                self.addEventListener('install', e => e.waitUntil(caches.open(CACHE_NAME).then(c => c.addAll(['/']))));
                self.addEventListener('fetch', e => e.respondWith(caches.match(e.request).then(r => r || fetch(e.request))));
                `;
                const blob = new Blob([swCode], { type: 'application/javascript' });
                navigator.serviceWorker.register(URL.createObjectURL(blob));
            });
        }

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'flex';
            
            installBtn.addEventListener('click', () => {
                toggleMenu();
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choice) => {
                    if (choice.outcome === 'accepted') {
                        installBtn.style.display = 'none';
                    }
                    deferredPrompt = null;
                });
            });
        });
        
        showConverter();
    </script>
</body>
</html>
